<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Infinity Technology Support Chat</title>
  <style>
    html,
    body {
      height: 100%;
    }

    body {
      min-height: 100vh;
    }

    :root {
      color-scheme: light;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      --color-body: #f5f7fb;
      --color-surface: #ffffff;
      --color-surface-muted: #eef1f8;
      --color-border: #d6deeb;
      --color-text: #1f2329;
      --color-muted: #6b7585;
      --color-primary: #479aed;
      --color-user: #479aed;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100%;
      background: var(--color-body);
      color: var(--color-text);
      display: flex;
      flex-direction: column;
    }

    .chat-shell {
      background: var(--color-surface);
      border-radius: 0;
      border: 1px solid var(--color-border);
      width: 100%;
      min-height: 100vh;
      height: 100%;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .chat-shell__header {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 20px 24px;
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      gap: 16px;
    }

    .chat-shell__profile {
      display: flex;
      align-items: center;
      gap: 16px;
      min-width: 0;
    }

    .chat-shell__avatar {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background: var(--color-surface-muted);
      border: 1px solid var(--color-border);
      object-fit: cover;
    }

    .chat-shell__titles {
      display: grid;
      gap: 4px;
    }

    .chat-shell__title {
      font-size: 1.0625rem;
      font-weight: 600;
      margin: 0;
      color: var(--color-text);
    }

    .chat-shell__subtitle {
      margin: 0;
      font-size: 0.875rem;
      color: var(--color-muted);
    }

    .chat-shell__main {
      flex: 1 1 auto;
      background: var(--color-surface-muted);
      display: flex;
      flex-direction: column;
    }

    .chat-shell__scroll {
      flex: 1 1 auto;
      overflow-y: auto;
      padding: 20px 24px 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .chat-shell__time {
      align-self: center;
      background: rgba(111, 123, 133, 0.16);
      color: var(--color-muted);
      font-size: 0.75rem;
      font-weight: 600;
      padding: 6px 14px;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .chat-shell__log {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .message {
      max-width: 85%;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }

    .message__bubble {
      padding: 14px 18px;
      background: var(--color-surface);
      border-radius: 20px;
      border-bottom-left-radius: 6px;
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.08);
      color: var(--color-text);
    }

    .message--user {
      margin-left: auto;
      align-items: flex-end;
    }

    .message--user .message__bubble {
      background: var(--color-user);
      color: #ffffff;
      border-radius: 20px;
      border-bottom-right-radius: 6px;
      box-shadow: none;
    }

    .message__author {
      font-size: 0.8125rem;
      font-weight: 600;
      margin: 0 0 4px;
      color: var(--color-muted);
    }

    .message--user .message__author {
      color: rgba(255, 255, 255, 0.8);
    }

    .message__text {
      margin: 0;
      font-size: 0.975rem;
      line-height: 1.5;
    }

    .message__meta {
      font-size: 0.75rem;
      color: var(--color-muted);
      align-self: flex-start;
    }

    .message--user .message__meta {
      color: rgba(255, 255, 255, 0.75);
      align-self: flex-end;
    }

    .chat-shell__form {
      padding: 18px 24px 24px;
      display: flex;
      gap: 12px;
      align-items: center;
      background: var(--color-surface);
      border-top: 1px solid var(--color-border);
    }

    .chat-shell__input {
      flex: 1 1 auto;
      border-radius: 24px;
      padding: 12px 18px;
      border: 1px solid var(--color-border);
      background: var(--color-surface-muted);
      font-size: 1rem;
      color: var(--color-text);
    }

    .chat-shell__input::placeholder {
      color: rgba(111, 123, 133, 0.7);
    }

    .chat-shell__input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(71, 154, 237, 0.18);
      background: var(--color-surface);
    }

    .chat-shell__submit {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      border: none;
      background: var(--color-primary);
      color: #ffffff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    .chat-shell__submit:focus-visible {
      outline: 2px solid #ffffff;
      outline-offset: 2px;
    }

    .chat-shell__submit:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 20px rgba(71, 154, 237, 0.35);
    }

    .chat-shell__submit:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .chat-shell__submit-icon {
      font-size: 22px;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    @media (max-width: 540px) {
      .chat-shell__header,
      .chat-shell__form {
        padding-left: 16px;
        padding-right: 16px;
      }

      .chat-shell__scroll {
        padding: 16px;
      }

      .chat-shell__title {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <section class="chat-shell" aria-label="Infinity Technology Support chat">
    <header class="chat-shell__header">
      <div class="chat-shell__profile">
        <img class="chat-shell__avatar" src="assets/infinity-technology-support-logo.svg" alt="Infinity Technology Support logo">
        <div class="chat-shell__titles">
          <p class="chat-shell__title">Infinity Technology Support</p>
          <p class="chat-shell__subtitle">Online Â· Typically replies in under a minute</p>
        </div>
      </div>
    </header>
    <main class="chat-shell__main">
      <div class="chat-shell__scroll" id="chatScroll">
        <div id="sessionTime" class="chat-shell__time" role="status"></div>
        <div id="chatLog" class="chat-shell__log" aria-live="polite"></div>
      </div>
    </main>
    <form id="chatForm" class="chat-shell__form" autocomplete="off">
      <label class="sr-only" for="chatMessage">Enter your message</label>
      <input id="chatMessage" class="chat-shell__input" name="message" type="text" placeholder="Enter messages" required>
      <button type="submit" class="chat-shell__submit">
        <span class="sr-only">Send message</span>
        <span class="chat-shell__submit-icon" aria-hidden="true">ðŸ“¨</span>
      </button>
    </form>
  </section>
  <script>
    const messageTemplates = [
      { author: 'Infinity Technology Support', role: 'agent', text: 'I can remote in to run diagnostics if you can keep the device powered on for a few minutes.' },
      { author: 'Infinity Technology Support', role: 'agent', text: 'A reboot usually takes care of that memory leakâ€”have you tried power cycling the workstation yet?' },
      { author: 'Infinity Technology Support', role: 'agent', text: 'If the VPN prompts again, the passphrase is the same as your emailâ€”let me know if you need it reset.' },
      { author: 'Infinity Technology Support', role: 'agent', text: 'I just pushed a patch to your laptop. Please install it when you see the prompt so we can close the ticket.' },
      { author: 'Infinity Technology Support', role: 'agent', text: 'Thanks for contacting Infinity Technology Support. Iâ€™ll stay on the line while you try the steps.' }
    ];

    const scriptedConversation = [
      { role: 'agent', author: 'Infinity Technology Support', text: 'Welcome to Infinity Technology Support! What kind of issue are you running into today?' },
      { role: 'user', author: 'You', text: 'Hi, my laptop keeps dropping off the company Wi-Fi.' },
      { role: 'agent', author: 'Infinity Technology Support', text: 'Thanks for letting me know. Is this happening on any other networks or just at the office?' },
      { role: 'user', author: 'You', text: 'Only at the office. It works fine at home.' },
      { role: 'agent', author: 'Infinity Technology Support', text: 'Got it. I see your device hasnâ€™t installed the latest network drivers yet. Let me push those down now.' },
      { role: 'user', author: 'You', text: 'Okay, I just got a notification for an update.' },
      { role: 'agent', author: 'Infinity Technology Support', text: 'Perfectâ€”go ahead and install that, then reboot. Iâ€™ll stay here to confirm the Wi-Fi reconnects.' }
    ];

    const chatLog = document.getElementById('chatLog');
    const chatScroll = document.getElementById('chatScroll');
    const chatForm = document.getElementById('chatForm');
    const chatMessage = document.getElementById('chatMessage');
    const sessionTime = document.getElementById('sessionTime');

    const startTimestamp = new Date();
    sessionTime.textContent = startTimestamp.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
    sessionTime.setAttribute('aria-label', `Conversation started at ${sessionTime.textContent}`);

    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
    }

    function createMessage(data, timestamp) {
      const wrapper = document.createElement('article');
      wrapper.className = `message message--${data.role}`;
      wrapper.setAttribute('data-author', data.author);
      wrapper.setAttribute('data-role', data.role);

      const bubble = document.createElement('div');
      bubble.className = 'message__bubble';

      const authorLine = document.createElement('p');
      authorLine.className = 'message__author';
      authorLine.textContent = data.author;
      bubble.appendChild(authorLine);

      const textNode = document.createElement('p');
      textNode.className = 'message__text';
      textNode.textContent = data.text;
      bubble.appendChild(textNode);

      const meta = document.createElement('footer');
      meta.className = 'message__meta';
      meta.textContent = formatTime(timestamp);

      wrapper.append(bubble, meta);
      return wrapper;
    }

    function appendMessage(data) {
      const timestamp = data.timestamp ? new Date(data.timestamp) : new Date();
      const messageEl = createMessage(data, timestamp);
      chatLog.appendChild(messageEl);
      requestAnimationFrame(() => {
        chatScroll.scrollTo({ top: chatScroll.scrollHeight, behavior: 'smooth' });
      });
    }

    function preloadConversation() {
      scriptedConversation.forEach((entry, index) => {
        setTimeout(() => appendMessage(entry), 400 * index);
      });
    }

    function agentReply() {
      const template = messageTemplates[Math.floor(Math.random() * messageTemplates.length)];
      setTimeout(() => appendMessage({ ...template }), 650);
    }

    chatForm.addEventListener('submit', (event) => {
      event.preventDefault();
      const text = chatMessage.value.trim();
      if (!text) {
        return;
      }
      appendMessage({ role: 'user', author: 'You', text });
      chatMessage.value = '';
      agentReply();
      chatMessage.focus();
    });

    preloadConversation();
  </script>
</body>
</html>
