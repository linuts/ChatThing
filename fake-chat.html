<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Parts4Heating Support Chat</title>
  <style>
    :root {
      color-scheme: light;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      --color-body: #f5f7fb;
      --color-surface: #ffffff;
      --color-surface-muted: #eef1f8;
      --color-border: #d6deeb;
      --color-text: #1f2329;
      --color-muted: #6b7585;
      --color-primary: #479aed;
      --color-user: #479aed;
      --shadow-soft: 0 24px 48px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: var(--color-body);
      color: var(--color-text);
    }

    .chat-shell {
      background: var(--color-surface);
      border-radius: 18px;
      border: 1px solid var(--color-border);
      width: min(460px, 100%);
      min-height: 620px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
    }

    .chat-shell__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      gap: 16px;
    }

    .chat-shell__profile {
      display: flex;
      align-items: center;
      gap: 16px;
      min-width: 0;
    }

    .chat-shell__avatar {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background: var(--color-surface-muted);
      border: 1px solid var(--color-border);
      object-fit: cover;
    }

    .chat-shell__titles {
      display: grid;
      gap: 4px;
    }

    .chat-shell__title {
      font-size: 1.0625rem;
      font-weight: 600;
      margin: 0;
      color: var(--color-text);
    }

    .chat-shell__subtitle {
      margin: 0;
      font-size: 0.875rem;
      color: var(--color-muted);
    }

    .chat-shell__actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .icon-button {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid var(--color-border);
      background: var(--color-surface);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: var(--color-muted);
      cursor: pointer;
      transition: background 160ms ease, color 160ms ease, border-color 160ms ease;
    }

    .icon-button:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }

    .icon-button:hover {
      background: var(--color-surface-muted);
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .icon-button svg {
      width: 20px;
      height: 20px;
    }

    .chat-shell__main {
      flex: 1 1 auto;
      background: var(--color-surface-muted);
      display: flex;
      flex-direction: column;
    }

    .chat-shell__scroll {
      flex: 1 1 auto;
      overflow-y: auto;
      padding: 20px 24px 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .chat-shell__time {
      align-self: center;
      background: rgba(111, 123, 133, 0.16);
      color: var(--color-muted);
      font-size: 0.75rem;
      font-weight: 600;
      padding: 6px 14px;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .chat-shell__log {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .message {
      max-width: 85%;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }

    .message__bubble {
      padding: 14px 18px;
      background: var(--color-surface);
      border-radius: 20px;
      border-bottom-left-radius: 6px;
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.08);
      color: var(--color-text);
    }

    .message--user {
      margin-left: auto;
      align-items: flex-end;
    }

    .message--user .message__bubble {
      background: var(--color-user);
      color: #ffffff;
      border-radius: 20px;
      border-bottom-right-radius: 6px;
      box-shadow: none;
    }

    .message__author {
      font-size: 0.8125rem;
      font-weight: 600;
      margin: 0 0 4px;
      color: var(--color-muted);
    }

    .message--user .message__author {
      color: rgba(255, 255, 255, 0.8);
    }

    .message__text {
      margin: 0;
      font-size: 0.975rem;
      line-height: 1.5;
    }

    .message__meta {
      font-size: 0.75rem;
      color: var(--color-muted);
      align-self: flex-start;
    }

    .message--user .message__meta {
      color: rgba(255, 255, 255, 0.75);
      align-self: flex-end;
    }

    .chat-shell__form {
      padding: 18px 24px 24px;
      display: flex;
      gap: 12px;
      align-items: center;
      background: var(--color-surface);
      border-top: 1px solid var(--color-border);
    }

    .chat-shell__input {
      flex: 1 1 auto;
      border-radius: 24px;
      padding: 12px 18px;
      border: 1px solid var(--color-border);
      background: var(--color-surface-muted);
      font-size: 1rem;
      color: var(--color-text);
    }

    .chat-shell__input::placeholder {
      color: rgba(111, 123, 133, 0.7);
    }

    .chat-shell__input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(71, 154, 237, 0.18);
      background: var(--color-surface);
    }

    .chat-shell__submit {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      border: none;
      background: var(--color-primary);
      color: #ffffff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    .chat-shell__submit:focus-visible {
      outline: 2px solid #ffffff;
      outline-offset: 2px;
    }

    .chat-shell__submit:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 20px rgba(71, 154, 237, 0.35);
    }

    .chat-shell__submit:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .chat-shell__submit svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    @media (max-width: 540px) {
      body {
        padding: 12px;
      }

      .chat-shell {
        border-radius: 16px;
      }

      .chat-shell__header,
      .chat-shell__form {
        padding-left: 16px;
        padding-right: 16px;
      }

      .chat-shell__scroll {
        padding: 16px;
      }

      .chat-shell__title {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <section class="chat-shell" aria-label="Parts4Heating Support chat">
    <header class="chat-shell__header">
      <div class="chat-shell__profile">
        <img class="chat-shell__avatar" src="https://parts4heating.a.gdms.cloud/images/logo/live_chat_1760621583.png" alt="Parts4Heating Support logo">
        <div class="chat-shell__titles">
          <p class="chat-shell__title">Parts4Heating Support</p>
          <p class="chat-shell__subtitle">Online · Typically replies in under a minute</p>
        </div>
      </div>
      <div class="chat-shell__actions">
        <button type="button" class="icon-button" aria-label="Start a call">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6.77 3.05c.54-.37 1.18-.38 1.7.06l2.15 1.86c.6.52.75 1.36.32 2.05l-.86 1.37c-.28.44-.26 1 .06 1.42 1.21 1.66 2.71 3.1 4.37 4.31.41.3.95.34 1.39.09l1.39-.77c.73-.41 1.63-.22 2.17.44l1.72 2.11c.43.53.41 1.28-.02 1.8-.91 1.09-2.36 1.76-3.73 1.54-3.56-.6-7.47-3.41-10.64-7.06-2.93-3.35-4.65-7.07-4.63-10.14 0-1.5.75-2.8 1.8-3.45Z" />
          </svg>
        </button>
        <button type="button" class="icon-button" aria-label="More options">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M5 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm9 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm3 2a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" />
          </svg>
        </button>
      </div>
    </header>
    <main class="chat-shell__main">
      <div class="chat-shell__scroll" id="chatScroll">
        <div id="sessionTime" class="chat-shell__time" role="status"></div>
        <div id="chatLog" class="chat-shell__log" aria-live="polite"></div>
      </div>
    </main>
    <form id="chatForm" class="chat-shell__form" autocomplete="off">
      <label class="sr-only" for="chatMessage">Enter your message</label>
      <input id="chatMessage" class="chat-shell__input" name="message" type="text" placeholder="Enter messages" required>
      <button type="submit" class="chat-shell__submit">
        <span class="sr-only">Send message</span>
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="m3.41 10.79 5.06 2.86c.32.18.71.15.99-.07l6.51-5.39-5.38 6.53a1 1 0 0 0-.1 1.11l2.87 5.06c.34.6 1.2.64 1.62.06l5.03-7.06c.25-.35.24-.82-.02-1.17a.97.97 0 0 0-.8-.37l-11.9.23 8.71-6.2c.46-.33.56-.98.22-1.45-.23-.32-.62-.46-.99-.37L3.6 9.48c-.8.2-1.04 1.2-.19 1.31Z" />
        </svg>
      </button>
    </form>
  </section>
  <script>
    const messageTemplates = [
      { author: 'Parts4Heating Support', role: 'agent', text: 'If you need anything else for that unit, I can bundle the parts to save on shipping.' },
      { author: 'Parts4Heating Support', role: 'agent', text: 'Most Raypak components ship the same day if we confirm the order before 3 PM ET.' },
      { author: 'Parts4Heating Support', role: 'agent', text: 'Would you like me to email installation tips or troubleshooting guides along with your order?' },
      { author: 'Parts4Heating Support', role: 'agent', text: 'Feel free to send photos of the heater label if you want me to double-check compatibility.' },
      { author: 'Parts4Heating Support', role: 'agent', text: 'Thanks for reaching out to Parts4Heating—just let me know when you are ready to proceed.' }
    ];

    const scriptedConversation = [
      { role: 'agent', author: 'Parts4Heating Support', text: 'Welcome! Please enter the requested information so that we can better serve you.' },
      { role: 'user', author: 'You', text: 'Hi there, I need a replacement igniter for a Raypak 266A heater.' },
      { role: 'agent', author: 'Parts4Heating Support', text: 'I can help with that. Do you know the exact model number or serial from the rating plate?' },
      { role: 'user', author: 'You', text: 'Yes, the serial number ends with 3419.' },
      { role: 'agent', author: 'Parts4Heating Support', text: 'Perfect— that points to the IID kit R185106. We have it in stock and it ships today.' },
      { role: 'user', author: 'You', text: 'Great, what does shipping usually cost to New Jersey?' },
      { role: 'agent', author: 'Parts4Heating Support', text: 'Ground service typically runs about $12, and orders over $150 qualify for free freight.' }
    ];

    const chatLog = document.getElementById('chatLog');
    const chatScroll = document.getElementById('chatScroll');
    const chatForm = document.getElementById('chatForm');
    const chatMessage = document.getElementById('chatMessage');
    const sessionTime = document.getElementById('sessionTime');

    const startTimestamp = new Date();
    sessionTime.textContent = startTimestamp.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
    sessionTime.setAttribute('aria-label', `Conversation started at ${sessionTime.textContent}`);

    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
    }

    function createMessage(data, timestamp) {
      const wrapper = document.createElement('article');
      wrapper.className = `message message--${data.role}`;
      wrapper.setAttribute('data-author', data.author);
      wrapper.setAttribute('data-role', data.role);

      const bubble = document.createElement('div');
      bubble.className = 'message__bubble';

      const authorLine = document.createElement('p');
      authorLine.className = 'message__author';
      authorLine.textContent = data.author;
      bubble.appendChild(authorLine);

      const textNode = document.createElement('p');
      textNode.className = 'message__text';
      textNode.textContent = data.text;
      bubble.appendChild(textNode);

      const meta = document.createElement('footer');
      meta.className = 'message__meta';
      meta.textContent = formatTime(timestamp);

      wrapper.append(bubble, meta);
      return wrapper;
    }

    function appendMessage(data) {
      const timestamp = data.timestamp ? new Date(data.timestamp) : new Date();
      const messageEl = createMessage(data, timestamp);
      chatLog.appendChild(messageEl);
      requestAnimationFrame(() => {
        chatScroll.scrollTo({ top: chatScroll.scrollHeight, behavior: 'smooth' });
      });
    }

    function preloadConversation() {
      scriptedConversation.forEach((entry, index) => {
        setTimeout(() => appendMessage(entry), 400 * index);
      });
    }

    function agentReply() {
      const template = messageTemplates[Math.floor(Math.random() * messageTemplates.length)];
      setTimeout(() => appendMessage({ ...template }), 650);
    }

    chatForm.addEventListener('submit', (event) => {
      event.preventDefault();
      const text = chatMessage.value.trim();
      if (!text) {
        return;
      }
      appendMessage({ role: 'user', author: 'You', text });
      chatMessage.value = '';
      agentReply();
      chatMessage.focus();
    });

    preloadConversation();
  </script>
</body>
</html>
